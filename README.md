# DivoroomBot
![](https://shields.microej.com/badge/python-3.10-orange)
![](https://shields.microej.com/badge/aiogram-v3.1.1-lightblue)
![](https://shields.microej.com/badge/django-v4.2.7-blue)
![](https://img.shields.io/pypi/v/asyncpg?style=flat&label=acyncpg)


## Описание
DivoroomBot - это телеграм бот для подачи заявки на роспись от [divoroom](https://t.me/divoroom).\
В данном боте можно оставить заявку на роспись, купить работы в наличии, а также посмотреть примеры работ и отзывы. Заполненная пользователем заявка отправляется владельцу бота 
в следующем виде:\
\
<img src="https://bytepix.ru/ib/aeYebYr4ED.jpg" width=400>

### ТЗ от заказчика
После совместного обсуждения были определены следующие основные требования к проекту:
1. Определенная структура составления заявки пользователем
2. Сбор статистики о количестве пользователей, посетивших бота
3. Возможность самостоятельного добавления/удаления/редактирования товаров в наличии
4. Самостоятельное добавление/удаление примеров работ и отзывов
5. Возможность редактирования заявки перед отправкой

### Выбранные решения для реализации требований

В качестве платформы для добавления/редактирования/удаления товаров в наличии было решено использовать встроенную в django административную панель. 
Также при помощи административной панели реализовано самостоятельное добавление/удаление примеров работ и отзывов, отображающихся в боте.Там же можно посмотреть 
количество пользователей, посетивших бота. Список созданных моделей представлен ниже:
<img src="https://bytepix.ru/ib/TcjG3cCQbh.png" width=600>\
Бот написан на асинхронном фреймворке aiogram, запущен на хостинге [beget](https://beget.com), в качестве БД используется PostgreSQL с использованием асинхронного драйвера asyncpg.
Сайт управления наполнением бота написан с помощью фреймворка django.
## Локальный запуск проекта
Выполните клонирование проекта и установите необходимые для работы зависимости:
```
git clone https://github.com/skojpish/divoroom.git
pip install -r requirements.txt
```
Создайте файл .env по пути /divoroom/bot/ со следующим наполнением:
```
TOKEN = 'токен телеграм бота'
MASTER_ID = 'телеграм айди аккаунта для заявок'
MASTER_USERNAME = 'телеграм юзернейм аккаунта для заявок'
DB_USER = 'логин базы данных'
DB_PASSWORD = 'пароль базы данных'
DB_NAME = 'название БД'
```
Выполните миграции django проекта для создания моделей в вашей БД:
```
cd django_admin/proj
python manage.py makemigrations
python manage.py migrate
```
Создайте нового супер пользователя для django admin:
```
python manage.py createsuperuser
```
Запустите django проект:
```
python manage.py runserver
```
Запустите бота:
```
cd ../..
python main.py
```
